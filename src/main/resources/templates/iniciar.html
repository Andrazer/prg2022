<!DOCTYPE html>
<html lang="es">
<th:block th:include="/fragments/head.html"></th:block>
<body class="home9">
   <div class="container pt-5">
   
      <div class="row justify-content-center">
         <div class="col-auto">



      <form class="mt-5">
         <!-- Email input -->
         <div class="form-outline mb-4">
           <input id='username' type='text' name='username' value='' class="form-control">
           <label class="form-label" for="form2Example1">Usuario</label>
         </div>
       
         <!-- Password input -->
         <div class="form-outline mb-4">
           <input id='password' type='password' name='password' class="form-control"/>
           <label class="form-label" for="form2Example2">Clave</label>
         </div>
       
         <!-- 2 column grid layout for inline styling -->
         <div class="row mb-4">
           <div class="col d-flex justify-content-center">
             <!-- Checkbox -->
             <div class="form-check">
               <input class="form-check-input" type="checkbox" value="" id="form2Example31" checked />
               <label class="form-check-label" for="form2Example31"> mantener sesion</label>
             </div>
           </div>
       
           <div class="col">
             <!-- Simple link -->
             <a href="#!">Registrarse?</a>
           </div>
         </div>
       
         <!-- Submit button -->
         <button type="button" class="btn btn-primary btn-block mb-4" onclick="CallWebAPI();">Iniciar sesi√≥n</button>
       
         <!-- Register buttons -->
         <div class="text-center">
            <input name="submit" type="button" value="Registrame (DEV)" onclick="Registrame();" />
            <input name="submit" type="button" value="Salir" onclick="Salir();" />
        </div>
      </form>
   </div>

</div>
      <script>    
         function CallWebAPI() {
// create a JSON object
const json = { 
      username: document.querySelector("#username").value,
      password: document.querySelector("#password").value
};

// request options
const options = {
    method: 'POST',
    body: JSON.stringify(json),
    headers: {
        'Content-Type': 'application/json'
    }
}

// send post request
fetch('/api/auth/signin', options)
    .then(res => res.json())
    .then(res => console.log(res.message))
    .catch(err => console.error(err));
         }
         </script>
   <script>    
      function Registrame() {
// create a JSON object
const json = { 
   username: "Admin",
   password: "123456",
   email: "Admin@admin.com",
   role: ["mod","usr"]
};

// request options
const options = {
 method: 'POST',
 body: JSON.stringify(json),
 headers: {
     'Content-Type': 'application/json'
 }
}

// send post request
fetch('/api/auth/signup', options)
 .then(res => res.json())
 .then(res => console.log(res))
 .catch(err => console.error(err));
      }
</script>
<script> 
function Salir() {
   // request options
   const options = {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    }
   }
   // send post request
   fetch('/api/auth/signout', options)
    .then(res => res.json())
    .then(res => console.log(res.message))
    .catch(err => console.error(err));
         }
         </script>    
         </div>  
         <script src="/js/bootstrap.bundle.min.js"></script>
      </body>
      </html>

